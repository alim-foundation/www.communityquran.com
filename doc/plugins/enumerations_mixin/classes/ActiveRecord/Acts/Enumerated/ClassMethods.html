<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: ActiveRecord::Acts::Enumerated::ClassMethods</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">ActiveRecord::Acts::Enumerated::ClassMethods</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../../files/vendor/plugins/enumerations_mixin/lib/active_record/acts/enumerated_rb.html">
                vendor/plugins/enumerations_mixin/lib/active_record/acts/enumerated.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000003">[]</a>&nbsp;&nbsp;
      <a href="#M000002">all</a>&nbsp;&nbsp;
      <a href="#M000006">include?</a>&nbsp;&nbsp;
      <a href="#M000004">lookup_id</a>&nbsp;&nbsp;
      <a href="#M000005">lookup_name</a>&nbsp;&nbsp;
      <a href="#M000007">purge_enumerations_cache</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">enumeration_model_updates_permitted</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000003" class="method-detail">
        <a name="M000003"></a>

        <div class="method-heading">
          <a href="#M000003" class="method-signature">
          <span class="method-name">[]</span><span class="method-args">(arg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000003-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000003-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/enumerations_mixin/lib/active_record/acts/enumerated.rb, line 43</span>
43:         <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">arg</span>)
44:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">arg</span>
45:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Symbol</span>
46:             <span class="ruby-identifier">rval</span> = <span class="ruby-identifier">lookup_name</span>(<span class="ruby-identifier">arg</span>.<span class="ruby-identifier">id2name</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rval</span>
47:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
48:             <span class="ruby-identifier">rval</span> = <span class="ruby-identifier">lookup_name</span>(<span class="ruby-identifier">arg</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rval</span>
49:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Fixnum</span>
50:             <span class="ruby-identifier">rval</span> = <span class="ruby-identifier">lookup_id</span>(<span class="ruby-identifier">arg</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rval</span>
51:           <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>
52:             <span class="ruby-identifier">rval</span> = <span class="ruby-keyword kw">nil</span> 
53:           <span class="ruby-keyword kw">else</span>
54:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;#{self.name}[]: argument should be a String, Symbol or Fixnum but got a: #{arg.class.name}&quot;</span>            
55:           <span class="ruby-keyword kw">end</span>
56:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>((<span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-identifier">:acts_enumerated_on_lookup_failure</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">:enforce_strict_literals</span>), <span class="ruby-identifier">arg</span>)
57:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="#M000002" class="method-signature">
          <span class="method-name">all</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000002-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000002-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/enumerations_mixin/lib/active_record/acts/enumerated.rb, line 35</span>
35:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">all</span>
36:           <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@all</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@all</span>
37:           <span class="ruby-ivar">@all</span> = <span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, 
38:                       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-identifier">:acts_enumerated_conditions</span>),
39:                       <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-identifier">:acts_enumerated_order</span>)
40:                       ).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">val</span><span class="ruby-operator">|</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">freeze</span>}.<span class="ruby-identifier">freeze</span>
41:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000006" class="method-detail">
        <a name="M000006"></a>

        <div class="method-heading">
          <a href="#M000006" class="method-signature">
          <span class="method-name">include?</span><span class="method-args">(arg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000006-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000006-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/enumerations_mixin/lib/active_record/acts/enumerated.rb, line 67</span>
67:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">include?</span>(<span class="ruby-identifier">arg</span>)
68:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">arg</span>
69:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Symbol</span>
70:             <span class="ruby-keyword kw">return</span> <span class="ruby-operator">!</span><span class="ruby-identifier">lookup_name</span>(<span class="ruby-identifier">arg</span>.<span class="ruby-identifier">id2name</span>).<span class="ruby-identifier">nil?</span>
71:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
72:             <span class="ruby-keyword kw">return</span> <span class="ruby-operator">!</span><span class="ruby-identifier">lookup_name</span>(<span class="ruby-identifier">arg</span>).<span class="ruby-identifier">nil?</span>
73:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Fixnum</span>
74:             <span class="ruby-keyword kw">return</span> <span class="ruby-operator">!</span><span class="ruby-identifier">lookup_id</span>(<span class="ruby-identifier">arg</span>).<span class="ruby-identifier">nil?</span>
75:           <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">self</span>
76:             <span class="ruby-identifier">possible_match</span> = <span class="ruby-identifier">lookup_id</span>(<span class="ruby-identifier">arg</span>.<span class="ruby-identifier">id</span>) 
77:             <span class="ruby-keyword kw">return</span> <span class="ruby-operator">!</span><span class="ruby-identifier">possible_match</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">possible_match</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">arg</span>
78:           <span class="ruby-keyword kw">end</span>
79:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
80:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="#M000004" class="method-signature">
          <span class="method-name">lookup_id</span><span class="method-args">(arg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000004-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000004-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/enumerations_mixin/lib/active_record/acts/enumerated.rb, line 59</span>
59:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lookup_id</span>(<span class="ruby-identifier">arg</span>)
60:           <span class="ruby-identifier">all_by_id</span>[<span class="ruby-identifier">arg</span>]
61:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000005" class="method-detail">
        <a name="M000005"></a>

        <div class="method-heading">
          <a href="#M000005" class="method-signature">
          <span class="method-name">lookup_name</span><span class="method-args">(arg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000005-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000005-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/enumerations_mixin/lib/active_record/acts/enumerated.rb, line 63</span>
63:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lookup_name</span>(<span class="ruby-identifier">arg</span>)
64:           <span class="ruby-identifier">all_by_name</span>[<span class="ruby-identifier">arg</span>]
65:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000007" class="method-detail">
        <a name="M000007"></a>

        <div class="method-heading">
          <a href="#M000007" class="method-signature">
          <span class="method-name">purge_enumerations_cache</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
NOTE: purging the cache is sort of pointless because of the per-process
rails model. By default this blows up noisily just in case you try to be
more clever than rails allows. For those times (like in Migrations) when
you really do want to alter the records you can silence the carping by
setting enumeration_model_updates_permitted to true.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000007-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000007-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/enumerations_mixin/lib/active_record/acts/enumerated.rb, line 89</span>
89:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">purge_enumerations_cache</span>
90:           <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">enumeration_model_updates_permitted</span>
91:             <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;#{self.name}: cache purging disabled for your protection&quot;</span>
92:           <span class="ruby-keyword kw">end</span>
93:           <span class="ruby-ivar">@all</span> = <span class="ruby-ivar">@all_by_name</span> = <span class="ruby-ivar">@all_by_id</span> = <span class="ruby-keyword kw">nil</span>
94:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>